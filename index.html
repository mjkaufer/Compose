<html>
	<head>
		<script src="./js/leap-0.6.2.min.js"></script>
		<script src="./js/wad-min.js"></script>
	</head>
	<body>
		<script>
			var count = 0;
			var done = false;

			Leap.loop(function(frame){
				if(!done && frame.hands.length){
					done = true;
					console.log(frame.hands[0])
				}
				// if(frame.hands.length)
					// console.log(frame.hands[0].fingers.length);
				if(count%5==0 && frame.hands.length > 0 && frame.hands[0].fingers.length){
			  		console.log(frame.hands[0].fingers[0].tipPosition);
			  		// console.log(frame.hands[0].fingers[0].tipPosition[1])
			  		var extended = 0;
			  		for(var i = 0; i < frame.hands[0].fingers.length; i++){
			  			if(frame.hands[0].fingers[0].extended)
			  				extended++;
			  		}
			  		if(extended < 1)
			  			return;


			  		var scaleX = frame.hands[0].fingers[0].tipPosition[0] / 500 + 0.5;// should get between 0 and 1, approximately
			  		var scaleY = (frame.hands[0].fingers[0].tipPosition[1] - 40) / 440;// should get between 0 and 1, approximately
			  		var scaleZ = frame.hands[0].fingers[0].tipPosition[2] / 250;// should get between -1 and 1, approximately
			  		//may or may not surpass their thresholds :(
			  		freq = scaleX * 800 + 200;
			  		var source = "sawtooth";
			  		if(scaleY > 0.75)
			  			source = "sine";
			  		else if(scaleY > 0.5)
			  			source = "square";
			  		else if(scaleY > 0.25)
			  			source = "triangle";
			  		var panning = 10 * scaleZ;
			  		var music = new Wad({source: source,pitch: freq, panning:panning});
			  		music.play();
			  		setTimeout(function(){
			  			music.stop();
			  		},200);
			  		// console.log'a');
				}
				count++;

			});
		</script>
	</body>
</html>	
